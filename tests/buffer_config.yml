---

buffers:
    vg_watchpoints:
        command: 'info watchpoints'
    vg_registers:
        command: 'info registers'
        on_startup: true
        diff:
            show_diff: true
            buffer_input_cache_variable: 'g:vg_registers_cache'
    vg_breakpoints:
        command: 'info breakpoints'
    vg_session_log:
        scrolling_buffer: true
        on_startup: true

commands:
    stepi:
        steps:
            stepi_and_get_current_address:
                type: 'command_with_match'
                command: 'stepi'
                match: '(0x[0-9a-f]{2,16})'
                try_set: 'current_frame_address'
        update_buffers: true
    continue:
        steps:
            continue_and_get_current_address:
                type: 'command_with_match'
                command: 'continue'
                match: '(0x[0-9a-f]{2,16})'
                try_set: 'current_frame_address'
        update_buffers: true

variables:
    current_frame_address:
        type: 'python_and_vim'

events:
    before_spawn:
    after_spawn:
    before_config_command:
    after_config_command:
        message_run_to_entrypoint_was_successful:
            run_for: 'run_to_entrypoint'
            type: 'vim'
            function: 'vgdb#events#run_to_entrypoint#was_successful'
    before_command:
    after_command:
    before_buffer_update:
    after_buffer_update:

settings:
    logging:
        use_session_log_file: true
        session_log_filename: 'vgdb_session.log'
        session_buffer_name: 'vg_session_log'
        buffer_input_variable: 'g:vg_full_query_result'
    buffers:
        default_input_buffer_variable: 'g:vg_query_result'
        base_filter: 'vg_base'
        load_on_start: 'vg_disassembly'
        stack_buffers_by_default: true
        stack_buffer_window_width: 60
    process:
        ttl_stream_timeout: 0.08
        run_command_on_startup: false
        command_to_run_on_startup: 'bin/dev-up'
        command_on_startup_log_file: 'vgdb_startup.log'
        main_process_name: 'gdb'
        main_process_default_arguments: ' -q --interpreter=mi2 '
        find_full_process_name: 'true'
        end_of_output_regex: '\(gdb\)'
